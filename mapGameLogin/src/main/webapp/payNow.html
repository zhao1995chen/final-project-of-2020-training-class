<!DOCTYPE html>
<html>
<head>
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
</script>
<meta charset="UTF-8">
<title>Insert Coffee</title>
</head>
<body>
<form id="idFormAioCheckOut">
	咖啡名稱:
	<input type="text" id="tradeDesc" value="Description" />
	<br /> 售價:
	<input type="text" id="totalAmount" value="200" />
	<br /> 總量:
	<input type="text" id="merchantTradeDate" value="2017/01/01 08:05:23" />
	<br /> 供應商:
	<input type="text" id="merchantTradeNo" value="testCompasdAAS44" />
	<br />
	<input type="hidden" name="MerchantID" value="2000132" />
	<input type="hidden" name="HashKey" value="5294y06JbISpM5x9" />
	<input type="hidden" name="HashIV" value="v77hoKGq4kWxNNIS" />
	
	
	</form>
	<input type="button" id="insert" onclick="insert()" value="Insert" />
	<form id="allPayAPI">123</form>
	<script>
          function insert(){
              var cof=$("#tradeDesc").val();
              var sal=$("#totalAmount").val();
              var tot=$("#merchantTradeDate").val();
              var sup=$("#merchantTradeNo").val();
              var data = JSON.stringify({"tradeDesc":cof ,"totalAmount":sal,"merchantTradeDate":tot,"merchantTradeNo":sup});
              
              $.ajax({
                  url: "http://localhost/mapGame/Pay/toPay",
                  data: JSON.stringify({"tradeDesc":cof ,"totalAmount":sal,"merchantTradeDate":tot,"merchantTradeNo":sup}),
                  type: "post",
                  contentType:"application/json",
                  dataType: 'html',
                  success:function(J){  
                      console.log(J);
                      $('#allPayAPI').html(J);
                      $('#__ecpayForm').attr('target', '_blank').submit();
                      },
                  error: function (xhr, ajaxOptions, thrownError) {
                      alert(xhr.status);
                      alert(thrownError);
                      console.log(data);
                  }
              });
          }
   </script>

</body>
</html>